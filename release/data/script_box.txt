<goto style_box>
<script byline>function addHeaders(id) {
	if (id == null) {
		var elems = document.querySelectorAll("div.content");
	}else{
		var elems = [tag_divs_[id]];
	}

	for (var i = 0; i < elems.length; i++) {
		if (elems[i].childNodes[0].className.match(/header/i) != null) {
			continue;
		}

		var header_div = document.createElement("div");
		header_div.className = "header header_expanded";
		var text_div = document.createElement("div");
		text_div.className = "header_text";
		text_div.innerHTML = elems[i].id.toUpperCase();
		header_div.appendChild(text_div);
		var buttons_div = document.createElement("div");
		buttons_div.className = "header_button hb_expanded";
		header_div.appendChild(buttons_div);

		elems[i].insertBefore(header_div, elems[i].childNodes[0]);

		if (typeof addHeaderClickEvent == "function") {
			addHeaderClickEvent(id);
		}
	}
	scrollBoxesToBottom();
}</script>
<goto style_box>

<script>addHeaders();</script>
<goto narrator_box>

<script byline>function positionCollapsedTextboxes() {
	var collapsed_elems = document.querySelectorAll("div.content_collapsed");

	if (collapsed_elems.length == 0) { return; }

	var root_font_size = parseFloat(window.getComputedStyle(document.getElementsByTagName("html")[0], null).fontSize);
	var sum_left = 0;
	var left_value = 0;

	for (var i = 0; i < collapsed_elems.length; i++) {
		collapsed_elems[i].style.top = 0;
		left_value = sum_left + 0.5*root_font_size;
		sum_left = left_value + parseFloat(window.getComputedStyle(collapsed_elems[i], null).width);

		collapsed_elems[i].style.left = left_value/root_font_size + "rem";
	};
}

function textboxExpandCollapse(id, only_expand) {
	var textbox_elem = tag_divs_[id];
	var header_elem = textbox_elem.firstElementChild;
	var header_button_elem = header_elem.lastElementChild;
	var text_elem = textbox_elem.lastElementChild;

	if (css_transition_dur_ == null) { getTransitionDuration(); }

	if (header_button_elem.className.match(/hb_expanded/i) != null && !only_expand) {
		if (div_work_area_.className.match(/work_area_collapsed/i) == null) {
			div_work_area_.className += " work_area_collapsed";
		}

		header_button_elem.className = header_button_elem.className.replace(/hb_expanded/i, "hb_collapsed");
		text_elem.className = text_elem.className.replace(/text_expanded/i, "text_collapsed");
		textbox_elem.className += " content_collapsed";
		header_elem.className = header_elem.className.replace(/header_expanded/i, "header_collapsed");

		if (!is_paused_) { files_content_[id]["expanded"] = false; }

		window.setTimeout(function() {
			var textbox_rect = textbox_elem.getBoundingClientRect();
			textbox_elem.style.position = "absolute";
			textbox_elem.style.left = textbox_rect.left + "px";
			textbox_elem.style.top = textbox_rect.top + "px";
			positionCollapsedTextboxes();
		}, css_transition_dur_);
	}else if (header_button_elem.className.match(/hb_collapsed/i) != null) {
		textbox_elem.className = textbox_elem.className.replace(/content_collapsed/i, "").trim();
		textbox_elem.style.position = "";
		textbox_elem.style.left = "";
		textbox_elem.style.top = "";
		header_elem.className = header_elem.className.replace(/header_collapsed/i, "header_expanded");
		text_elem.className = text_elem.className.replace(/text_collapsed/i, "text_expanded");
		header_button_elem.className = header_button_elem.className.replace(/hb_collapsed/i, "hb_expanded");

		if (document.querySelectorAll("div.hb_collapsed").length == 0) {
			div_work_area_.className = div_work_area_.className.replace(/work_area_collapsed/i, "").trim();
		}

		if (!is_paused_) { files_content_[id]["expanded"] = true; }
		positionCollapsedTextboxes();

		window.setTimeout(function() {
			scrollBoxesToBottom(id);
		}, css_transition_dur_);
	}
}

function headerEventHandler(e) {
	if (e == null) { return; }

	textboxExpandCollapse(e.target.parentElement.parentElement.id, false);
}

function addHeaderClickEvent(id) {
	if (id == null) {
		var elems = document.querySelectorAll("div.header_button");
	}else{
		var elems = [tag_divs_[id].querySelector("div.header_button")];
	}

	for (var i = 0; i < elems.length; i++) {
		if (elems[i].addEventListener) {
			elems[i].addEventListener("click", function(e) { headerEventHandler(e); }, false);
		}else if (elems[i].attachEvent){
			elems[i].attachEvent("onclick", function(e) { headerEventHandler(e); });
		}
	}
}

addHeaderClickEvent();</script>
<goto narrator_box>

<script>textboxExpandCollapse("style_box", false);</script>
<goto narrator_box>

<script>createElem("about_box");</script>
<script>textboxExpandCollapse("script_box", false);</script>
<goto about_box>
